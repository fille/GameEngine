<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script src="js/jquery.js"></script>
        <style>
            #can {
                
                border:1px solid black;
            }
        </style>
</head>
<body>
    <script type="text/javascript">
		 	
        var Point = function(x,y,z){

                        this.x = x;
                        this.y = y;
                        this.z = z;
			this.parse = function() {
			    
				return  {"x":this.x-this.z,"y":this.y + 0.5*(this.x+this.z)}
			}
        }
        var Figure = function(p1,p2,p3,p4,p5,p6,p7,p8)
        {
                this.p1 = p1;
                this.p2 = p2;
                this.p3 = p3;
                this.p4 = p4;
                this.p5 = p5;
                this.p6 = p6;
                this.p7 = p7;
                this.p8 = p8;
                this.coords = [this.p1,this.p2,this.p3,this.p4,this.p5,this.p6,this.p7,this.p8];
 
	}

        var obj = new Figure(new Point(30,30,30),
                             new Point(60,30,30),
                             new Point(60,30,60),
                             new Point(30,30,60),
                             new Point(30,60,30),
                             new Point(60,60,30),
                             new Point(30,60,30),
                             new Point(60,60,60));
        var buildTile = function()
        {
           var line = [];
	   var full = [];
           base = 30;
	   var y = 0;
	   var z = 0;
  	   var add = 0;
          for(var j = 0;j<20;j++ )
	  {
		line =[];
			
		for(var i = 0;i < 20;i++){
	   	    
	
		 	
	  	var  current = new Figure(new Point(30+add,30+y,30+z),
                                    	  new Point(60+add,30+y,30+z),
                                     	  new Point(60+add,30+y,60+z),
                                          new Point(30+add,30+y,60+z),
                                          new Point(30+add,60+y,60+z), //here
                                          new Point(60+add,60+y,60+z),
                                          new Point(60+add,60+y,30+z),
                                          new Point(30+add,60+y,30+z))
			line.push(current);
		 z +=30
		  				
		}
 
		full.push(line)
	        z = 0; 	 
	  	add += 30;
	     }		
                return full;
        }


    var init = function () {
        canvas = document.getElementById("can").getContext('2d');
    }

    var draw = function() {
        drawleft();
    }

    var tile = buildTile();
            
    var drawleft = function () {
           
    var newx = 0;
    var newy = 0;
    var cord = [];

    for(var j =0 ;j < tile.length;j++){
        
	
        for(var i = 0;i < tile[j].length;i++){
             var cord = [];
	     var obj =	tile[j][i];
	     
	 for(var l = 0;l < obj.coords.length;l++)
	 {
	     cord.push(obj.coords[l].parse());
       	 }
	
	  	  
       	  canvas.moveTo(cord[0].x,cord[0].y);
      	  canvas.lineTo(cord[1].x,cord[1].y);
	  canvas.lineTo(cord[2].x,cord[2].y);
	  canvas.lineTo(cord[3].x,cord[3].y);
	  canvas.lineTo(cord[0].x,cord[0].y);
	 
	  canvas.moveTo(cord[3].x,cord[3].y)
	  	  
	  canvas.lineTo(cord[4].x,cord[4].y);
	  canvas.lineTo(cord[5].x,cord[5].y); 
	  canvas.lineTo(cord[6].x,cord[6].y);	
	  canvas.lineTo(cord[7].x,cord[7].y);
	 // canvas.lineTo(cord[0].x+100,cord[0].y);	  
	  canvas.stroke();
}
	}
}

            
   $(function() {
        init();
        draw();
    })

    </script>
        
        <canvas id="can" width="640" height="480"></canvas>
    </body>
</html>
